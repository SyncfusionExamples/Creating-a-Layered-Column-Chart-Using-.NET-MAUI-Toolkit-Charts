<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:chart="clr-namespace:Syncfusion.Maui.Toolkit.Charts;assembly=Syncfusion.Maui.Toolkit"
             xmlns:local="clr-namespace:LayeredColumnChartMAUI"
             x:Class="LayeredColumnChartMAUI.MainPage">

    <ContentPage.BindingContext>
        <local:ViewModel x:Name="viewModel" />
    </ContentPage.BindingContext>

    <ContentPage.Resources>
        <x:String x:Key="IconPathData">M8.9000244,16.199995L8.9000244,20.199995 12.900024,20.199995 12.900024,16.199995z M2.6000366,16.100004L2.6000366,20.100004 6.6000366,20.100004 6.6000366,16.100004z M17.600037,13.400007L32,13.400007 32,31.799999 27.900024,31.799999 27.900024,22.499998 22.100037,22.499998 22.100037,31.799999 17.600037,31.799999z M8.9000244,9.8000022L8.9000244,13.800001 12.900024,13.800001 12.900024,9.8000022z M2.6000366,9.6999961L2.6000366,13.699995 6.6000366,13.699995 6.6000366,9.6999961z M17.600037,9.6000052L32,9.6000052 32,11.499998 17.600037,11.499998z M8.9000244,3.4000088L8.9000244,7.4000083 12.900024,7.4000083 12.900024,3.4000088z M2.6000366,3.3000026L2.6000366,7.3000022 6.6000366,7.3000022 6.6000366,3.3000026z M0,0L15.5,0 15.5,31.799999 0,31.799999z</x:String>
    </ContentPage.Resources>

    <Border Stroke="Black" Background="White" StrokeThickness="0.6" Margin="10">

        <Grid RowDefinitions="auto, *">

            <HorizontalStackLayout Grid.Row="0" Padding="{OnIdiom Desktop=20, Phone=15}" Spacing="10">

                <Path Fill="#1C5FC0"  
                      Data="{StaticResource IconPathData}"
                      x:DataType="local:ViewModel"
                      Margin="{OnIdiom Desktop='0,5,0,0', Phone='0,2,0,0'}" />

                <VerticalStackLayout Margin="5,0,0,0">
                    <Label Text="Top Challenges Faced by European Accommodation Sector" 
                           FontSize="{OnIdiom Desktop=26, Phone=17}" />
                    <Label Text="Visualizing the distribution of operational concerns reported by hoteliers across European countries in 2024." 
                           FontSize="{OnIdiom Desktop=15, Phone=12}" />
                </VerticalStackLayout>
            </HorizontalStackLayout>

            <chart:SfCartesianChart EnableSideBySideSeriesPlacement="False" Grid.Row="1">

                <chart:SfCartesianChart.XAxes>
                    <chart:CategoryAxis ShowMajorGridLines="False">
                        <chart:CategoryAxis.LabelStyle>
                            <chart:ChartAxisLabelStyle FontSize="{OnIdiom Desktop=16, Phone=12}" />
                        </chart:CategoryAxis.LabelStyle>
                    </chart:CategoryAxis>
                </chart:SfCartesianChart.XAxes>

                <chart:SfCartesianChart.YAxes>
                    <chart:NumericalAxis Minimum="0" Maximum="100" 
                                         Interval="{OnIdiom Desktop=20, Phone=25}">
                        <chart:NumericalAxis.MajorGridLineStyle>
                            <chart:ChartLineStyle StrokeDashArray="5,7" />
                        </chart:NumericalAxis.MajorGridLineStyle>
                        <chart:NumericalAxis.LabelStyle>
                            <chart:ChartAxisLabelStyle LabelFormat="0'%'" 
                                                       FontSize="{OnIdiom Desktop=16, Phone=12}" />
                        </chart:NumericalAxis.LabelStyle>
                    </chart:NumericalAxis>
                </chart:SfCartesianChart.YAxes>

                <chart:ColumnSeries ItemsSource="{Binding DataSource}"
                                    x:DataType="local:ViewModel"
                                    XBindingPath="Country"
                                    YBindingPath="EnergyCost"
                                    EnableTooltip="True"
                                    EnableAnimation="True"
                                    Label="Energy cost"
                                    LegendIcon="SeriesType"
                                    Fill="#003b95">
                </chart:ColumnSeries>

                <chart:ColumnSeries ItemsSource="{Binding DataSource}"
                                    x:DataType="local:ViewModel"
                                    XBindingPath="Country"
                                    YBindingPath="StaffCost"
                                    Width="0.65"
                                    EnableTooltip="True"
                                    EnableAnimation="True"
                                    Label="Cost of staff"
                                    LegendIcon="SeriesType"
                                    Fill="#1C5FC0" >
                </chart:ColumnSeries>

                <chart:ColumnSeries ItemsSource="{Binding DataSource}"
                                    x:DataType="local:ViewModel"
                                    XBindingPath="Country"
                                    YBindingPath="WorkerShortage"
                                    Width="0.5"
                                    EnableTooltip="True"
                                    EnableAnimation="True"
                                    Label="Shortage of skilled workers"
                                    LegendIcon="SeriesType"
                                    Fill="#3E80D8">
                </chart:ColumnSeries>

                <chart:ColumnSeries ItemsSource="{Binding DataSource}"
                                    x:DataType="local:ViewModel"
                                    XBindingPath="Country"
                                    YBindingPath="Tax"
                                    Width="0.35"
                                    EnableTooltip="True"
                                    EnableAnimation="True"
                                    Label="Potential tax increase"
                                    LegendIcon="SeriesType"
                                    Fill="#71A6F2" >
                </chart:ColumnSeries>

                <chart:ColumnSeries ItemsSource="{Binding DataSource}"
                                    x:DataType="local:ViewModel"
                                    XBindingPath="Country"
                                    YBindingPath="Geopolitical"
                                    Width="0.2"
                                    EnableTooltip="True"
                                    EnableAnimation="True"
                                    Label="Geopolitical uncertainties"
                                    LegendIcon="SeriesType"
                                    Fill="#B3D3FF">
                </chart:ColumnSeries>

                <chart:SfCartesianChart.Legend>
                    <chart:ChartLegend ToggleSeriesVisibility="True">
                        <chart:ChartLegend.LabelStyle>
                            <chart:ChartLegendLabelStyle FontSize="{OnIdiom Desktop=13, Phone=12}" />
                        </chart:ChartLegend.LabelStyle>
                    </chart:ChartLegend>
                </chart:SfCartesianChart.Legend>

            </chart:SfCartesianChart>

        </Grid>

    </Border>

</ContentPage>
